package domrender

// GENERATED FILE, DO NOT EDIT!  See renderer-js-script-maker.go

const jsHelperScript = "(function(){if(window.vuguRender)return;const a=0,b=1,c=5,d=6,e=7,f=20,g=21,h=23,i=24,j=25,k=26,l=27,m=28,n=29,o=30,p=31,A=32,z=33,s=35,t=36,u=37,v=38,w=39,x=40,r=41;class q{constructor(a,b){return this.dataView=a,this.offset=b||0,this}readUint8(){var a=this.dataView.getUint8(this.offset);return this.offset++,a}readRefToString(){var a=this.dataView.getUint32(this.offset).toString(16).padStart(8,\"0\")+this.dataView.getUint32(this.offset+4).toString(16).padStart(8,\"0\");return this.offset+=8,a}readUint32(){var a=this.dataView.getUint32(this.offset);return this.offset+=4,a}readString(){var a=this.dataView.getUint32(this.offset),b=y.decode(new DataView(this.dataView.buffer,this.dataView.byteOffset+this.offset+4,a));return this.offset+=a+4,b}}let y=new TextDecoder;window.vuguGetActiveEvent=function(){let a=window.vuguState||{};return window.vuguState=a,a.activeEvent},window.vuguGetActiveEventTarget=function(){let a=window.vuguState||{};return window.vuguState=a,a.activeEvent&&a.activeEvent.target},window.vuguGetActiveEventCurrentTarget=function(){let a=window.vuguState||{};return window.vuguState=a,a.activeEvent&&a.activeEvent.currentTarget},window.vuguActiveEventPreventDefault=function(){let a=window.vuguState||{};window.vuguState=a,a.activeEvent&&a.activeEvent.preventDefault&&a.activeEvent.preventDefault()},window.vuguActiveEventStopPropagation=function(){let a=window.vuguState||{};window.vuguState=a,a.activeEvent&&a.activeEvent.stopPropagation&&a.activeEvent.stopPropagation()},window.vuguSetEventHandler=function(b){let a=window.vuguState||{};window.vuguState=a,a.eventHandlerFunc=b},window.vuguSetCallbackHandler=function(b){let a=window.vuguState||{};window.vuguState=a,a.callbackHandlerFunc=b},window.vuguGetRenderArray=function(){return window.vuguRenderArray||(window.vuguRenderArray=new Uint8Array(16384)),window.vuguRenderArray},window.vuguRender=function(){var z,B,A;let C=window.vuguRenderArray;if(!window.vuguRenderArray)throw\"window.vuguRenderArray is not set\";let y=window.vuguState||{};window.vuguState=y;let D=new TextEncoder,E=new DataView(C.buffer,C.byteOffset,C.byteLength);z=new q(E,0),y.mountPointEl=y.mountPointEl||null,y.el=y.el||null,y.bufferedInnerHTML=y.bufferedInnerHTML||null,y.nextElMove=y.nextElMove||null,y.elAttrNames=y.elAttrNames||{},y.eventHandlerMap=y.eventHandlerMap||{},y.elEventKeys=y.elEventKeys||{};instructionLoop:while(!0){let q=z.readUint8();try{switch(q){case a:break instructionLoop;case b:{y.el=null,y.nextElMove=null;break}case s:{let a=y.el;if(!a)throw\"opcodeSetProperty: no current reference\";let b=z.readString(),c=z.readString();a[b]=JSON.parse(c);break}case t:{let a=z.readString();y.el=document.querySelector(a),y.nextElMove=null;break}case d:{let a=y.el;if(!a)throw\"opcodeSetAttrStr: no current reference\";let b=z.readString(),c=z.readString();a.setAttribute(b,c),y.elAttrNames[b]=!0;break}case v:{let b=y.el;if(!b)throw\"opcodeSetAttrNSStr: no current reference\";let a=z.readString();a==\"\"&&(a=null);let c=z.readString(),d=z.readString();b.setAttributeNS(a,c,d),y.elAttrNames[c]=!0;break}case e:{y.elAttrNames={},y.elEventKeys={};let b=z.readString(),c=z.readString();if(y.mountPointEl)y.el=y.mountPointEl;else{let a=document.querySelector(b);if(!a)throw\"mount point selector not found: \"+b;y.mountPointEl=a,y.el=a}let a=y.el;if(a.nodeName.toUpperCase()!=c.toUpperCase()){let b=document.createElement(c);a.parentNode.replaceChild(b,a),y.mountPointEl=b,a=b}y.el=a,y.nextElMove=null;break}case c:{if(!y.el)throw\"no element selected\";if(y.nextElMove)throw\"cannot call opcodeRemoveOtherAttrs when nextElMove is set\";let a=[];for(let b=0;b<y.el.attributes.length;b++)y.elAttrNames[y.el.attributes[b].name]||a.push(y.el.attributes[b].name);for(let b=0;b<a.length;b++)y.el.attributes.removeNamedItem(a[b]);break}case j:{if(y.nextElMove==\"first_child\")y.nextElMove=null;else{let a=y.el.parentNode,b=y.el;while(b.nextSibling)a.removeChild(b.nextSibling);y.el=a,y.nextElMove=null}break}case f:{if(y.nextElMove){if(y.nextElMove==\"first_child\"){if(y.el=y.el.firstChild,!y.el)throw\"unable to find state.el.firstChild\"}else if(y.nextElMove==\"next_sibling\")if(y.el=y.el.nextSibling,!y.el)throw\"unable to find state.el.nextSibling\";y.nextElMove=null}if(!y.el)throw\"must have current selection to use opcodeMoveToFirstChild\";y.nextElMove=\"first_child\";break}case k:{if(y.nextElMove){if(y.nextElMove==\"first_child\"){if(y.el=y.el.firstChild,!y.el)throw\"unable to find state.el.firstChild\"}else if(y.nextElMove==\"next_sibling\")if(y.el=y.el.nextSibling,!y.el)throw\"unable to find state.el.nextSibling\";y.nextElMove=null}if(!y.el)throw\"must have current selection to use opcodeMoveToNextSibling\";y.nextElMove=\"next_sibling\";break}case g:{let a=z.readString();if(y.elAttrNames={},y.elEventKeys={},y.nextElMove==\"first_child\"){y.nextElMove=null;let b=y.el.firstChild;if(b)y.el=b;else{b=document.createElement(a),y.el.appendChild(b),y.el=b;break}}else if(y.nextElMove==\"next_sibling\"){y.nextElMove=null;let b=y.el.nextSibling;if(b)y.el=b;else{b=document.createElement(a),y.el.parentNode.appendChild(b),y.el=b;break}}else if(y.nextElMove)throw\"bad state.nextElMove value: \"+y.nextElMove;if(y.el.nodeType!=1||y.el.nodeName.toUpperCase()!=a.toUpperCase()){let b=document.createElement(a);y.el.parentNode.replaceChild(b,y.el),y.el=b}break}case w:{let a=z.readString(),b=z.readString();if(y.elAttrNames={},y.elEventKeys={},y.nextElMove==\"first_child\"){y.nextElMove=null;let c=y.el.firstChild;if(c)y.el=c;else{c=document.createElementNS(b,a),y.el.appendChild(c),y.el=c;break}}else if(y.nextElMove==\"next_sibling\"){y.nextElMove=null;let c=y.el.nextSibling;if(c)y.el=c;else{c=document.createElementNS(b,a),y.el.parentNode.appendChild(c),y.el=c;break}}else if(y.nextElMove)throw\"bad state.nextElMove value: \"+y.nextElMove;if(y.el.nodeType!=1||y.el.nodeName.toUpperCase()!=a.toUpperCase()){let c=document.createElementNS(b,a);y.el.parentNode.replaceChild(c,y.el),y.el=c}break}case h:{let a=z.readString();if(y.nextElMove==\"first_child\"){y.nextElMove=null;let b=y.el.firstChild;if(b)y.el=b;else{let b=document.createTextNode(a);y.el.appendChild(b),y.el=b;break}}else if(y.nextElMove==\"next_sibling\"){y.nextElMove=null;let b=y.el.nextSibling;if(b)y.el=b;else{let b=document.createTextNode(a);y.el.parentNode.appendChild(b),y.el=b;break}}else if(y.nextElMove)throw\"bad state.nextElMove value: \"+y.nextElMove;if(y.el.nodeType!=3){let b=document.createTextNode(a);y.el.parentNode.replaceChild(b,y.el),y.el=b}else y.el.textContent=a;break}case i:{let a=z.readString();if(y.nextElMove==\"first_child\"){y.nextElMove=null;let b=y.el.firstChild;if(b)y.el=b;else{let b=document.createComment(a);y.el.appendChild(b),y.el=b;break}}else if(y.nextElMove==\"next_sibling\"){y.nextElMove=null;let b=y.el.nextSibling;if(b)y.el=b;else{let b=document.createComment(a);y.el.parentNode.appendChild(b),y.el=b;break}}else if(y.nextElMove)throw\"bad state.nextElMove value: \"+y.nextElMove;if(y.el.nodeType!=8){let b=document.createComment(a);y.el.parentNode.replaceChild(b,y.el),y.el=b}else y.el.textContent=a;break}case u:{let a=z.readString();y.bufferedInnerHTML=(y.bufferedInnerHTML||\"\")+a;break}case n:{let a=z.readString();if(!y.el)throw\"opcodeSetInnerHTML must have currently selected element\";if(y.nextElMove)throw\"opcodeSetInnerHTML nextElMove must not be set\";if(y.el.nodeType!=1)throw\"opcodeSetInnerHTML currently selected element expected nodeType 1 but has: \"+y.el.nodeType;y.el.innerHTML=(y.bufferedInnerHTML||\"\")+a,y.bufferedInnerHTML=null;break}case l:{let b=z.readString(),a=y.eventHandlerMap[b]||{},c=[];for(let b in a)y.elEventKeys[b]||c.push(b);for(let b=0;b<c.length;b++){let d=c[b],f=a[d],e=d.split(\"|\");y.el.removeEventListener(e[0],f,{capture:+e[1],passive:+e[2]}),delete a[d]}Object.keys(a).length==0?delete y.eventHandlerMap[b]:y.eventHandlerMap[b]=a;break}case m:{let e=z.readString(),b=z.readString(),c=z.readUint8(),d=z.readUint8();if(!y.el)throw\"must have state.el set in order to call opcodeSetEventListener\";B=b+\"|\"+(c?\"1\":\"0\")+\"|\"+(d?\"1\":\"0\"),y.elEventKeys[B]=!0;let f=y.eventHandlerMap[e]||{},a=f[B];a||(a=function(f){y.activeEvent=f;let g={};for(let a in f){let b=typeof f[a];(b==\"boolean\"||b==\"number\"||b==\"string\")&&!0&&(g[a]=f[a])}if(f.target){g.target={};let a=f.target;for(let b in a){let c=typeof a[b];(c==\"boolean\"||c==\"number\"||c==\"string\")&&!0&&(g.target[b]=a[b])}}let k=JSON.stringify({position_id:e,event_type:b,capture:!!c,passive:!!d,event_summary:g}),h=D.encode(k);const i=h.byteLength-h.byteOffset,j=i+4,l=d=>{const b=16384,a=d+1,c=a%b;return c===0?a-1:a+(b-c)-1};let a=y.eventBuffer;if(!a||a.length<j){const b=l(j);a=new Uint8Array(b),y.eventBuffer=a,y.eventBufferView=new DataView(a.buffer,a.byteOffset,a.byteLength)}y.eventBuffer.set(h,4),y.eventBufferView.setUint32(0,i),y.eventHandlerFunc.call(null,a),y.activeEvent=null},f[B]=a,y.el.removeEventListener(b,a,{capture:c,passive:d})),y.el.addEventListener(b,a,{capture:c,passive:d}),y.eventHandlerMap[e]=f;break}case o:{let a=z.readString(),b=z.readString(),c=z.readUint8();if(c%2!=0)throw\"attrPairsLen is odd number: \"+c;A={};for(let a=0;a<c;a+=2){let b=z.readString(),d=z.readString();A[b]=d}y.elCSSTagsSet=y.elCSSTagsSet||[];let d=b;if(a==\"link\"&&(d=A.href),d==\"\"){this.console.log(\"element\",a,\"ignored due to empty key\");break}let e=null;if(this.document.querySelectorAll(a).forEach(b=>{let c;a==\"style\"?c=b.textContent:c=b.href,d==c&&(e=b)}),e)y.elCSSTagsSet.push(e);else{let c=this.document.createElement(a);for(let a in A)c.setAttribute(a,A[a]);c.vuguCreated=!0,b&&c.appendChild(document.createTextNode(b)),this.document.head.appendChild(c),y.elCSSTagsSet.push(c)}break}case p:{y.elCSSTagsSet=y.elCSSTagsSet||[],this.document.querySelectorAll('style,link').forEach(a=>{if(!a.vuguCreated)return;if(y.elCSSTagsSet.findIndex(b=>b==a)>=0)return;a.parentNode.removeChild(a)}),y.elCSSTagsSet=null;break}case r:{let b=z.readUint32(),a=y.el;if(!a)throw\"opcodeCallbackLastElement: no current reference\";y.callbackHandlerFunc(b,a);break}case x:{let a=z.readUint32();y.callbackHandlerFunc(a);break}default:{console.error(\"found invalid opcode\",q);return}}}catch(a){throw this.console.log(\"Error during instruction loop. Data opcode=\",q,\", state.el=\",y.el,\", state.nextElMove=\",y.nextElMove,\", with error: \",a),a}}}})()"
